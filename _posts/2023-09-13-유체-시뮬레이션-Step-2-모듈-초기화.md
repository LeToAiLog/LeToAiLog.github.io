---
title: 유체 시뮬레이션 Step 2. Initialization module
description: 유체 시뮬레이션(Smoothed Particle Hydrodynamics)을 구현하기 위한 두 번째 걸음
date: 2023-9-13 18:19:41 +09:00
categories: [Smoothed Particle Hydrodynamics]
tags: [Smoothed Particle Hydrodynamics, fluid simulation, physics simulation, 유체 시뮬레이션, fluid, 유체, 물리 시뮬레이션, 입자 시뮬레이션, Particles, 입자, SPH]
pin: true
math: true
mermaid: true
image:
  path: /assets/img/smoothed-particle-hydrodynamics/FigureCubeandBunny.png
  # 대표 이미지의 애니메이션 적용
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
  alt: (Left) Cube shape (Right) Stanford bunny shape.
---
<!--  -->
# **Module 초기화**
<hr>
## 매개변수를 초기화한 후에는 이제 이러한 매개변수를 사용하여 계산하여 넣을 값의 그릇을 만들어야 한다.<br><br>
구현은 직관적인 이해를 위해 **python**을 통해 구현되며 `[VPython](https://vpython.org/)`으로 시뮬레이션을 시각화한다.<br><br>
VPython은 간단한 물리 실험을 시각화하기 위한 도구로 **openGL**을 사용하여 구현된 Python 패키지이다.
<hr>
### **Template 초기화**<br><br>

모든 유체 입자가 유체의 위치를 유지하려면 위치를 초기화해야 한다.
이 값은 $x,y,z$로 표시되는 스칼라 값이다.

```python
import numpy as np
import time
import pandas as pd

from SPH_Density import computeDensity
from SPH_Pressure import computePressure, computePressForce
from SPH_Viscosity import computeViscForce
from SPH_Normal import computeNormal
from SPH_SurfaceTension import comptueSurfaceTensionForce

from Parameters_Output import *
from Object import ObjRead
from Particles import *
from vpython import *

scene = canvas(
  background=color.white,
  width=1200,
  height=700,
  center=vector(0, 0, 0),
  scale=(1.0, 1.0, 1.0),
  forward=vector(-0.005, -0.005, -0.005),
  autoscale=1,
)

scene_number = "_scene1"

x_pos, y_pos, z_pos = ObjRead.init_Cube_Shape()
ntotal = len(x_pos)
particle = np.zeros((3, ntotal), dtype=np.float32)
```

각 축의 벡터를 2차원으로 표현하여 코드를 작성하는 것이 접근성 면에서 더 편하다.
하지만 이해를 위해 입자 위치의 내용을 각각 $x,y,z$로 작성했다.

`x_pos`, `y_pos`, `z_pos`는 list이며 **`ObjRead`**에서 원하는 모양의 입자 세트 위치를 호출한다.
여기에서 사용된 입자 세트는 `Cube`이다.

| Particle Index |    $x$     |    $y$     |     $z$     |
| :------------: | :--------: | :--------: | :---------: |
|       1        | -0.1222185 | -0.1222185 | -0.1222185  |
|       2        | -0.1222185 | -0.1222185 | -0.09505883 |
|       3        | -0.1222185 | -0.1222185 | -0.06789917 |
|       ⋮        |     ⋮      |     ⋮      |      ⋮      |

![평활 입자 유체역학 커널 그림](/assets/img/smoothed-particle-hydrodynamics/SmoothingKernelFigurewithWhiteBackground.png){:width="500" height="589" style="border:1px solid #eaeaea; border-radius: 10px; padding: 0px;"} 
_**<span style="color:deepskyblue; font-size:150%">Figure 1. </span>
<span style="color:gainsboro;font-size:150%">Particle approximation using particles within the particle range(ℎ), 𝑘ℎ is the particle range, $$r_{ij}$$ is the distance between the neighbor particle and the central particle(red).</span>**_

<hr>

<!-- 이미지 -->
<!-- ![평활 입자 유체역학 커널 그림](/assets/img/smoothed-particle-hydrodynamics/SmoothingKernelFigurewithWhiteBackground.png){:width="500" height="589" style="border:1px solid #eaeaea; border-radius: 10px; padding: 0px;"} 
_**<span style="color:deepskyblue; font-size:150%">Figure 1. </span>
<span style="color:gainsboro;font-size:150%">Particle approximation using particles within the particle range(ℎ), 𝑘ℎ is the particle range, $$r_{ij}$$ is the distance between the neighbor particle and the central particle(red).</span>**_ -->