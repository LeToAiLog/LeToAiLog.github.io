---
title: 유체 시뮬레이션 Step 1. Initialization module
description: 유체 시뮬레이션(Smoothed Particle Hydrodynamics)을 구현하기 위한 첫 걸음
date: 2023-09-12 12:07:23 +09:00
categories: [Smoothed Particle Hydrodynamics]
tags: [Smoothed Particle Hydrodynamics, fluid simulation, physics simulation, 유체 시뮬레이션, fluid, 유체, 물리 시뮬레이션, 입자 시뮬레이션, Particles, 입자, SPH]
pin: true
math: true
mermaid: true
image:
  path: /assets/img/smoothed-particle-hydrodynamics/SmoothingKernelFigurewithWhiteBackground.png
  # 대표 이미지의 애니메이션 적용
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
  alt: Particle approximation using particles within the particle range(ℎ), 𝑘ℎ is the particle range, $r_{ij}$ is the distance between the neighbor particle and the central particle(red).
---

# **Module 초기화**
<hr>
<!-- <br>은 한줄 띄기 -->
## 유체 시뮬레이션을 구현하기 위해서<br> 가장 먼저 해야 할 것은 <br>사용되는 파라미터들을 <br>이해하고 정의하는 것이다.<br><br>사용되는 매개변수는 다음과 같다.<br><br>**`Rest density`, `Mass`, `Viscosity`, `Surface tension`, `Threshold`, `Gas stiffness`, `Restitution`, `Support radius`, `Differential time`, `π(Pi)`, `Box size`, `Gravity`, `Dimension`, `Max time step`, `Fluid volume`, `Particle diameter`, `Particle radius`.**

### **Rest density**
<hr>
**`Rest density`**는 종종 "`Rest mass density`"라고 불리는 물리학, 특히 일반 상대성 이론과 천체 물리학의 맥락에서 볼 수 있는 개념으로, 정지해 있을 때 물체나 공간의 영역에 있는 물질의 밀도를 나타내며, 이는 물체가 움직이지 않거나 중요한 상대론적 효과를 겪고 있다는 것을 의미한다.

쉽게 말해, 관측자에 비해 그 질량이 움직이지 않을 때, 주어진 부피 내에서 얼마나 많은 질량이 집중되어 있는지를 측정하는 것이다. Rest density는 천문학을 포함한 다양한 과학 분야에서 중요한 매개변수이며, 여기서 과학자들은 별, 행성, 은하와 같은 천체의 물질 분포를 이해하는 데 도움이 되었다.

### **Mass**
<hr>
**`Mass`**, 질량은 물리학의 기본 개념으로 물체에 포함된 물질의 양을 말한다. 물체 안에 포함된 물질의 양을 측정하는 것으로 일반적으로 킬로그램 또는 그램과 같은 단위로 표시된다.

질량은 중력으로 인해 물체에 작용하는 힘인 무게와 구별해야 한다. 물체의 고유한 성질로 우주의 위치에 상관없이 일정하게 유지되는 것이 질량이다.

힘(F)을 질량(m)및 가속도(a)와 연관시키는 뉴턴의 운동 제2법칙 (F=ma)과 같은 다양한 물리적 현상과 방정식에서 중요한 역할을 한다.
ex:) 역학, 천문학 및 기타 과학 분야.

### **Viscosity**
<hr>
**`Viscosity`**, 점도는 유체(액체 또는 기체)의 흐름에 대한 저항력을 설명하는 물리적 특성이다. 유체가 얼마나 "`두껍거나`", "`끈적거리는지`"를 측정하며, 유체 역학 및 다양한 산업 공정에서 중요한 요소이다.

점도는 일반적으로 두 가지 범위로 나뉜다.

1. **`Dynamic Viscosity`**(**`η`**): 절대 점도라고도 하는 이 점도는 전단력이나 응력을 받았을 때 흐르는 유체의 내부 저항을 측정하는 용도로 사용된다. **`η`**로 표시되며 이전 CGS 시스템에서는 국제 단위계(SI)에서 파스칼-초(Pa·s)또는 푸아즈(P)와 같은 단위로 표현할 수 있다.
2. **`Kinematic Viscosity`**(**`ν`**): 운동 점도는 유체의 동적인 점도를 밀도로 나눈 값으로 유체가 질량에 비해 얼마나 쉽게 흐르는지를 나타낸다. 운동 점도는 기호 **`ν`**로 표시되며 일반적으로 SI 단위의 초당 제곱미터(m²/s)또는 CGS 단위의 스톡(Stocks)과 같은 단위로 표현할 수 있다.

점도는 온도와 유체 분자 구성의 특성을 포함한 여러 요인에 의해 영향을 받는다. 일반적으로 높은 온도는 액체의 점도를 감소시켜 액체를 더 쉽게 흐르게 하는 경향이 있는 반면, 기체의 경우 높은 온도는 점도를 증가시킬 수 있다.

점도가 높은 유체는 꿀처럼 천천히 흘러 쏙아지지 않고, 점도가 낮은 유체는 물처럼 쉽게 흐른다. 윤활제와 페인트, 엔진과 산업 공정의 성능 최적화까지 점도를 파악하고 조절하는 것으로 다양한 분야에서 응용된다.

### **Surface tension**
<hr>
**`Surface tension`**, 표면장력은 액체 내부의 분자 또는 원자들 사이의 응집력으로 인해 발생하는 액체의 특성이다. 액체 표면이 표면적을 최소화하려는 외부의 힘에 저항하는 경향을 측정한 것이며, "`stretchiness`"와 "`stickiness`"를 말한다.

응집력으로 인해 액체 표면은 늘어진 고무시트의 표면처럼 장력을 받는 것처럼 움직이며, 액체 방울은 주어진 부피에 대해 가장 작은 표면적을 가지고 있기 때문에 구형을 형성하기 쉽고, 이것은 표면 장력과 관련된 에너지를 최소화한다.

표면장력은 다양한 자연 현상과 일상 현상에서 볼 수 있다. 물방울의 형성, 작은 곤충이 물 위를 걸을 수 있는 능력, 식물의 모세관 작용 등 이러한 관찰로 인해 다양한 산업 및 과학 응용 분야에서 액체의 거동을 결정하는 핵심 요소로 작용한다.

### **Threshold**
<hr>
**`Threshold`**, 유체 시뮬레이션에서 임계값은 시뮬레이션 내에서 특정 동작이나 동작이 언제 발생해야 하는지를 결정하는 데 사용되는 값이다. 유체 흐름의 특성이나 유체 관련 효과의 모양을 제어하고 관리하는 데 일반적으로 사용된다.

1. **`Density Threshold`**: 밀도는 특정 영역에 존재하는 유체의 양을 나타낸다. 밀도 임계값은 유체가 특정한 방식으로 해동해야 할 때를 결정하기 위해 설정할 수 있다. 예를 들어, 밀도 임계값이 특정 영역에서 초과되면 시뮬레이션을 통해 해당 위치에 기포나 거품을 생성할 수 있다.
2. **`Velocity Threshold`**: 유체 시뮬레이션에서 속도는 유체 입자의 속력과 방향을 나타낸다. 속도 임계값은 시뮬레이션을 통해 난류나 튀는 효과를 표현할 수 있다.
3. **`Pressure Threshold`**: 압력 임계값은 유체 내의 고압 또는 저압 영역을 식별하는 데 사용될 수 있다. 특정 임계값을 초과했을 때 소용돌이 운동과 같은 효과를 표현할 수 있다.
4. **`Threshold for Particle Creation/Deletion`**: 해당 임계값은 유체 입자가 생성되거나 삭제되는 시기를 제어하는 데 사용할 수 있다.예를 들면, 유체의 증발을 표현하기 위해 특정 임계값을 초과하거나 미만이 되면 제거하거나 생성할 수 있다.
5. **`Thresholds for Rendering Effects`**: 컴퓨터 그래픽 및 시각 효과에서 임계값은 유체 시뮬레이션에 특정 렌더링 효과를 적용해야 하는 시기를 결정하기 위해 사용할 수 있다. 예를 들어, 유체의 밀도에 따라 유체를 반투명 또는 불투명으로 렌더링하는 시기를 결정할 수 있다.

정리하자면 유체 시뮬레이션의 임계값은 시뮬레이션 내의 특정 물리적 특성 또는 조건을 기반으로 시뮬레이션된 유체가 어떻게 행동해야 하는지 또는 어떻게 시각적으로 표현되어야 하는지를 정의하는데 도움이 되는 기준 또는 트리거 역할을 한다.

이러한 임계값은 비디오 게임, 영화 및 과학 시뮬레이션을 포함한 다양한 응용 분야에서 사실적이고 동적인 유체 시뮬레이션을 생성하는데 필요한 조건이다.

해당 포스팅에서는 `Normal vector`를 사용하여 해당 값이 임계값보다 클 때 표면 장력을 계산하는데 사용되었다.

### **Gas stiffness**
<hr>
**`Gas stiffness`**, 기체강성은 압력과 부피의 변화에 따른 기체의 압축이나 팽창에 대한 저항력을 말한다. 기체가 물리적 상태의 변화에 얼마나 "`stiff`"하거나 저항하는지를 측정하는 것이다. 기체강성은 기체의 종류, 온도, 존재하는 기체 분자의 수 등 다양한 요인에 의해 영향을 받는다.

기체가 "`stiff`"하다고 하면 압력과 부피의 변화를 받을 때 쉽게 압축하거나 팽창하지 않는다는 뜻이다. 반면에 "`soft`"하면 압력이 변할때 기체의 부피가 쉽게 변하는 것을 말한다.

기체의 강성은 기체의 압력, 부피, 온도와 관련된 상태 방정식으로 설명된다. 기체마다 다른 상태 방정식이 있으며, 같은 조건에서 다양한 수준의 강성을 나타낼 수 있다. 예를 들어, 이상기체는 완벽하게 "`stiff`"하다(비압축성)고 하지만 실제 기체는 이러한 비압축성부터 압축성을 띠는 다양한 기체들이 존재한다.

기체의 강성을 이해하는 것은 공학과 물리학에서 압력 용기 설계, 열역학 연구, 기체의 유체 역학 모델링과 같은 다양한 응용 분야에서 필수적이다. 기체가 다양한 조건에서 어떻게 행동하는지 예측하는 데 중요한 역할을 하며 열역학 분야의 기본 개념이다.

### **Restitution**
<hr>
**`Restitution`**, 복원력은 Computational simulations에서 개체가 상호 작용할 때 에너지가 보존되는 방법과 관련된 중요한 개념이다.

복원력은 유체 입자들 사이 또는 유체와 고체 사이의 충돌 동안 얼마나 많은 운동 에너지가 유지되거나 손실되는지를 결정한다. 유체 시뮬레이션의 사실겅과 행동을 제어하는 중요한 매개변수이다.

유체 시뮬레이션에서 복원력을 사용하는 방법은 다음과 같다.

1. `개념 이해`: 종종 "`e`"로 표시되는 복원력은 0과 1사이의 계수이다. 0의 값은 운동 에너지의 완전한 손실을 의미하는 반면, 1의 값은 에너지 손실이 없음을 의미(탄성과 비탄성 충돌)한다.
2. `Set Restitution Coefficients(반발 계수 설정)`:
   - `Fluid-Fluid Collisions`: 서로 충돌하는 유체 입자의 반발력을 제어하기 위해 계수를 설정할 수 있다. 값이 높을수록 탄성 충돌에 가까워진다.
   - `Fluid-Solid Collisions`: 유체가 고체 물체(용기 벽과 같은)와 상호 작용할 때, 충돌 시 손실되는 에너지의 양을 제어하기 위해 반발 계수를 설정할 수 있다.
3. `시뮬레이션을 통한 조정`: 반발 계수를 설정한 후 유체 시뮬레이션을 실행하고 이를 바탕으로 반발 계수를 다시 설정한다. 유체가 에너지 보존, 물보라 및 고체 물체와 상호 작용 측면에서 어떻게 행동하는지 관찰하고 원하는 시각적 또는 물리적 결과를 얻기 위해 이러한 과정을 반복하고 미세 조정을 해야 한다.

복원력은 시뮬레이션에서 유체 거동에 영향을 미치는 여러 매개변수 중 하나이므로 특정 프로젝트에 가장 현실적이고 시각적으로 만족스러운 결과를 얻기 위해 점도, 밀도 및 입자 크기 등과 같은 다른 설정을 같이 실험해야 한다.

복원력과 함께 더불어 다른 매개변수들을 적용한 효과를 확인할 수 있는 시뮬레이션 도구로는 `Blender`, `SPH(Smoothed Particle Hydrodynamics) 라이브러리`, `Houdini` 등이 있다.

### **Support radius**
<hr>
![평활 입자 유체역학 커널 그림](/assets/img/smoothed-particle-hydrodynamics/SmoothingKernelFigurewithWhiteBackground.png){:width="500" height="589" style="border:1px solid #eaeaea; border-radius: 10px; padding: 0px;"} 
_**<span style="color:deepskyblue; font-size:150%">Figure 1. </span>
<span style="color:gainsboro;font-size:150%">Particle approximation using particles within the particle range(ℎ), 𝑘ℎ is the particle range, $$r_{ij}$$ is the distance between the neighbor particle and the central particle(red).</span>**_

**`Support radius`**, 유체 시뮬레이션에서 "`Support radius`"란 유체의 각 입자 또는 요소가 이웃 입자 또는 요소와 상호 작용하는 범위를 정의하는 기본 매개변수를 말한다. SPH(Smoothed Particle Hydrodynamics)와 같은 다양한 유체 시뮬레이션 기술 또는 FEM(Finite Element Method)과 같은 그리드 기반 방법에서 중요한 개념이다.

`Support radius`는 기본적으로 유체 시뮬레이션에서 입자 또는 요소가 주변의 다른 입자 또는 요소에 영향을 미치고 영향을 받는 거리를 설정한다. 이 상호 작용 반경은 밀도, 압력, 점도 및 속도와 같은 유체의 다양한 특성을 계산하는데 사용된다.

작동 방식은 다음과 같다.

1. `Particle Interaction`: 유체 시뮬레이션에서 각 입자는 `Support radius`내에서 이웃 입자와 상호 작용한다.
2. `Property Interpolation`: 속도, 밀도, 압력과 같은 속성은 `Support radius`내에 있는 이웃 입자와 보간하거나 평균으로 계산한다. 이는 인접 입자간의 속성 전달을 시뮬레이션하는 데 도움이 된다.
3. `Force Calculation`: `Pressure forces`나 `Viscosity forces`같은 힘은 이웃 입자의 특성을 기반으로 계산되어 유체 거동의 시뮬레이션으로 이어진다.
4. `Smoothing Kernel`: 이런 계산을 수행하기 위해 스무딩 커널이라는 수학적 함수가 사용된다. 이 커널은 대상 입자와의 거리를 기준으로 이웃 입자에 가중치를 할당하고, 커널의 중심에 가까울수록 더 높은 가중치를 받는다.

`Support radius`의 선택은 시뮬레이션의 세부 사항 및 정확도 수준에 직접적으로 영향을 미치기 때문에 유체 시뮬레이션에서 중요한 매개변수이다. 더 큰 `Support radius`는 입자가 더 넓은 거리에서 서로 영향을 미치므로 더 평활하고 안정적인 시뮬레이션을 만들 수 있지만 잠재적으로 더 낮은 세부 사항을 갖는다. 반대로 더 작은 `Support radius`는 더 미세한 세부 사항을 갖지만 수치 불안정성(시뮬레이션 붕괴) 또는 계산 비효율성을 초래할 수 있다.

적절한 `Support radius`를 선택하는 것은 계산 효율성과 특정 시뮬레이션에 필요한 세부 사항, 정확도 사이의 균형을 조율하는 일이다. 유체 시뮬레이션에서 원하는 결과를 얻기 위해서는 이론적으로 계산한 매개변수를 설정하는 것과 반복적인 실험을 통해 알아낸 매개변수를 이론 값과 조정하는 것이 필요하다.

### **Differential time**
<hr>
**`Differential time`**, `Differential time`은 유체가 시간에 따라 어떻게 거동하는지 계산하기 유체 역학 시뮬레이션을 개별 시간 단계로 분해하는 개념을 말한다. 이 접근법은 수치 시뮬레이션에서 물이나 공기와 같은 유체의 연속적이고 복잡한 거동을 근사화하기 위해 사용된다.

유체 시뮬레이션에서 유체의 거동은 공간과 시간의 각 지점에서 유체의 속도와 압력이 어떻게 변화하는지 설명하는 `Navier-Stokes equations`로 알려져 있다.
해당 방정식의 일반해는 아직까지 미해결 문제이기 때문에 이 방정식은 일반적으로 수치적 방법으로 해결한다.

`Differential time steps`는 시뮬레이션을 작은 시간 간격 또는 단계로 나누는 것을 포함한다. 각 시간 단계에서 유체의 거동은 현재 상태를 기반으로 계산되며, 그 결과는 다음 시간 단계에 대한 유체의 특성을 업데이트하는 데 사용된다. 시뮬레이션은 이러한 계산을 여러 시간 단계에 걸쳐 반복적으로 수행함으로써 시간이 지남에 따라 유체가 주변 환경과 어떻게 흐름, 변형 및 상호 작용하는지 추정할 수 있다.

`Time step`크기의 선택은 유체 시뮬레이션에서 매우 중요하다. `Time step`이 너무 크면 시뮬레이션의 부정확성과 불안정성을 초래할 수 있다. 반면에 `Time step`이 너무 작으면 시뮬레이션에 사용되는 리소스가 많아 시뮬레이션에 사용되는 시간이 오래걸릴 수 있다. 이러한 요인의 균형을 맞추는 것이 효과적인 유체 시뮬레이션을 설계하는 데 있어 노하우가 된다.

요약하면, 유체 시뮬레이션에서 시간 미분은 `Navier-Stokes equations`를 풀기 위해 수치적 방법을 사용하여 시간에 따른 유체의 거동을 근사화하기 위해 시뮬레이션 과정을 작은 시간 단계로 이산화(불연속적으로 만드는 것을 일컫는다.)한다는 것이다. 시스템의 작동 방식은 다음과 같다.

1. `Time step`: 시스템의 시뮬레이션 또는 모델이 있으며 일정한 간격으로 시스템의 상태를 업데이트하려고 한다. `Delta time`, `δt`는 각 시간 단계의 길이를 나타낸다.
2. `State update`: 각 시간 단계에서 시스템의 상태가 그 작은 시간 간격 동안 어떻게 변화하는지 계산한다. 위치, 속도, 힘 또는 다른 관련 변수를 업데이트 하는 것이 포함된다.
3. `Accumulation`: 이러한 업데이트를 여러 시간 단계에 걸쳐 반복적으로 적용함으로써 시스템의 동작을 더 오랜 시간에 걸쳐 근사화할 수 있다. `δt`가 작을수록 정확도가 높지만 더 많은 리소스가 필요하다.

`Delta time`은 움직임, 역학 및 상호 작용을 포함하는 물리학 시뮬레이션에서 중요한 개념이다. 시스템의 동작이 빠르게 변화할 수 있는 경우에도 시뮬레이션이 안정적으로 유지되고 현실적으로 동작하도록 보장해야 한다.

컴퓨터 그래픽에서 `Delta time`은 여러 하드웨어에 걸쳐 애니메이션과 움직임을 부드럽고 일관되게 만드는 데 사용된다. 컴퓨터의 처리 능력에 관계없이 게임, 시뮬레이션의 속도와 행동이 일관되게 유지되도록 해야한다.

### **π(Pi)**
<hr>
**`π(Pi)`**, 원의 둘레를 구하는 데 사용되는 것으로 우리에게 익숙한 `π(Pi)`는 이 포스팅에서 SPH(Smoothed Particle Hydrodynamics)의 Kernel function을 계산하는데 사용된다. (Support radius와 관련되어 있다.)

### Box size
<hr>
**`Box size`**, `Box size`는 유체가 작용할 수 있는 경계를 나타내기 위해 사용된다. 경계 조건은 일반적으로 시뮬레이션에서 복잡한 기하학적 구조로 표현되며, 이러한 경계 조건의 복잡성으로 인해 시뮬레이션의 리소스 소모가 커진다.

기하학은 물체와 공간의 모양, 크기, 속성, 차원에 대한 연구에 초점을 맞춘 수학의 한 분야이다. 점, 선, 각도, 표면, 그리고 입체의 관계와 속성을 다룬다. 기하학은 수천 년 동안 연구되어 온 수학의 기본 분야이며 건축, 공학, 예술 그리고 물리학을 포함한 다양한 과학적이고 실용적인 응용 분야에서 중요한 역할을 한다. 기하학은 우리가 물리적인 세계와 다른 물체들과 공간적인 배열 사이의 관계를 이해하고 설명할 수 있도록 도와준다.

### **Gravity**
<hr>
**`Gravity`**, 중력은 질량이나 에너지를 가진 물체들이 서로 끌어당기는 자연의 기본적인 힘이다. 물체가 떨어질 때 땅에 떨어지는 것, 우주에 있는 행성, 달, 다른 천체들의 움직임과 관련이 있다.

중력의 세기는 관련된 물체들의 질량과 물체 사이의 거리에 따라 달라진다. 뉴턴의 만유인력 법칙에 따르면 우주의 모든 질량은 질량의 곱에 정비례하고 거리의 제곱에 반비례하는 힘으로 다른 모든 질량을 끌어당긴다.

중력은 전자기력, 강한 핵력, 약한 핵력과 함께 우주를 구성하는 네 가지 기본적인 힘 중 하나이다. 중력의 효과는 알버트 아인슈타인의 일반 상대성 이론에 의해 설명되며, 이 이론은 중력을 거대한 물체에 의한 시공간 왜곡으로 보다 포괄적으로 이해할 수 있게 해준다.

이 유체 시뮬레이션에서 사용되는 중력은 지구를 기준으로 한다.

### **Dimension**
<hr>
**`Dimension`**, 유체 시뮬레이션을 구현하기 위해서는 다양한 시각으로 차원을 이해해야 한다.

우리가 살고 있는 공간은 3차원으로 잘 알려져 있지만, 컴퓨터 그래픽으로 3차원을 구현하여 모니터에 투영하기 위해서는 다시 2차원으로 변화시켜야 한다. 이때 가장 가까운 물체는 카메라에서 먼저 투영되고, 물체에 가려진 다른 물체는 컴퓨터의 자원을 절약하고 사실적으로 표현하기 위해 표현되지 않아야 한다. 또한, 움직이는 물체가 표현되려면 시간에 따라 물체의 위치가 변화해야 하고 이를 차원으로 표현하게 되면 시간축을 가진 위치 x, y, z의 4차원으로 표현할 수 있다.
`(컴퓨터 그래픽스 관점)`

유체 시뮬레이션에서 각기 다른 점성, 압력, 속도와 같은 경우도 이와 같은 차원 문제로 해석할 수 있으며 최종적으로 위치를 나타내는 식으로 통합할 수 있다는 사실을 알아야 한다.`(물리적 관점)`

구현하는 유체 시뮬레이션에서는 모든 입자에 대해 3차원 벡터를 구했으며, 각 입자는 외력 및 내력을 계산한 후 이를 최종적으로 속도로 변환하여 위치값에 더하는 방식으로 시뮬레이션을 구현했다.

### **Max time step**
<hr>
**`Max time step`**, `Max time step`은 시뮬레이션을 실행하고자 하는 시간의 라이프 사이클이다. Delta time은 시뮬레이션의 정확도를 결정하고 입자의 움직임을 더욱 세밀하게 할 수 있지만 Max time step은 시뮬레이션의 전체 시간을 결정하는 역할이다. Delta time과 마찬가지로 Max time step이 커지면 시뮬레이션을 계산하는 데 시간이 오래 걸리고 원하는 유체의 거동을 결정하기 어려워진다.

입자 기반 유체 시뮬레이션에서는 이러한 계산 시간을 줄이기 위해 수행해야 할 작업이 있다.

1. `Optimization of neighbor particle search algorithms`: 유체 시뮬레이션에서 가장 계산 시간이 많이 소요되는 단계는 이웃 입자를 탐색하는 단계이다. `Hash table`이나 `Tree`를 사용하면 더 빠르게 이웃 입자를 탐색할 수 있다. 또한, 적절한 `Smoothing length`를 결정하는 것도 매우 중요하다. `(Figure 1. 참조)`
2. `Parallel Processing`: CPU와 GPU의 발전으로 많은 시뮬레이션에 병렬 처리를 적용하는 것이 필수적인 시대가 되었다. CPU는 데이터가 메모리에 저장된 후 GPU로 전달되는 방식을 이해하고 각 시뮬레이션의 조건을 최적화하여 병렬 처리를 수행하는 것이 시뮬레이션을 가속화 하는데 도움된다.
3. `Total Particle Count`: 총 입자 수가 증가하면 당연하게도 시뮬레이션에서 계산되는 시간도 증가한다. 따라서 내부 입자들을 통합할 수 있는 방법을 찾아야 한다. (이에 대해서는 이미 여러 논문이 발표된 바가 있다.)

![해시 테이블 예시 그림](/assets/img/smoothed-particle-hydrodynamics/FigureHashTableFlow.png){:width="800" height="500" style="border:1px solid #eaeaea; border-radius: 10px; padding: 0px;"} 
_**<span style="color:deepskyblue; font-size:150%">Figure 2. </span> 
<span style="color:gainsboro;font-size:150%">Neighbor Particle Search Method Using Hash Table. The grid to which the central particle belongs has information on adjacent grids and particles.</span>**_



### **Fluid volume**
<hr>
**`Fluid volume`**, 시뮬레이션에 사용된 유체의 부피는 $(constant \times mass) \div rest density$에 의해 결정된다.

### **Particle diameter**
<hr>
**`Particle diameter`**, 식 (**`Fluid volume`**$^\frac{1}{3})\div 10$은 입자의 직경을 구하는 데 사용되며, 이 값은 입자의 반경을 결정하는 데 사용된다.

### **Particle radius**
<hr>
**`Particle radius`**, `Particle radius`는 `Particle diameter`의 $\frac{1}{2}$이다.

`Mass`와 `Rest density`가 변하더라도 변화된 값으로 인해 유체의 입자 크기가 유동적으로 변할 수 있기 때문에 식을 통해 유체 입자의 크기를 결정하는 것이 시뮬레이션 안정성에 도움이 된다.

>각 매개변수에 해당하는 값을 결정하려면 원하는 시뮬레이션 양상을 생성하기 위해 수많은 시행착오가 필요하다.
{: .prompt-info }